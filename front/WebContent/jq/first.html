<!DOCTYPE html>
<html><!-- HTML 주석 -->
	<head>
		<title>졸려시부엉</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=3.0">
		<link rel="stylesheet" href="../static/css/reset.css">
        <link rel="stylesheet" href="../static/css/main.css">
        <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"> -->
        <link rel="stylesheet" href="../static/css/bootstrap-4.5.0-dist/css/bootstrap.min.css">

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            $(function(){
               
                //dom트리에서 class속성이 divContent인 div객체의 하위요소 section객체찾기
                var $section = $("div.divContent>section");
                //----------상품목록 메뉴 START----------
                //dom트리에서 nav>ul>li>a요소의 class속성이 productList인 객체 찾기
                var $productListMenu = $('nav>ul>li>a.productList');
                
                $productListMenu.click(function(){
                    $.ajax({
                        url: '../productList.jsp'
                        , success: function(data){
                            //응답내용을 자바스크립트객체로 변환:배열형태로 응답
                            var responseArrObj = JSON.parse(data);
                            var sectionData = '<div class="products">'; 
                            responseArrObj.forEach(function(element, index){
                                var prod_no = element.prod_no;
                                var prod_name = element.prod_name;
                                var prod_price = element.prod_price;
            //	             응답내용 처리				
                            sectionData += '<div class="product">';
                            sectionData += "<ul>";
                            sectionData += "<li>";sectionData += prod_no;sectionData +="</li>";
                            sectionData += "<li>";sectionData += prod_name;sectionData +="</li>";
                            sectionData += "<li>";sectionData += prod_price;sectionData +="</li>";
                            sectionData += "</ul>";
                            sectionData += "</div>";
                            });			
                            sectionData += "</div>";
                            $section.html(sectionData);
                        }
                    });
                    $section.html("");
                    return false;
                });
                //----------상품목록 메뉴 END-----------
                
                //----------로그인버튼 CLICK START ------
                //DOM에 존재하지 않지만 향후 추가될 객체에 대한 이벤트 처리
                //on()
                $("div.divContent>section").on("click"
                        , "form>button[type=submit]"
                        , function(){
                            var idValue = $('form>label>input[name=id]').val();
                            var pwdValue = $('form>label>input[name=pwd]').val();
                            /*
                            로그인 버튼이 클릭되면 checkbox가 선택된 경우 localstorage에 저장
                            */
                            if(typeof(Storage) !== "undefined"){
                                if($('form>label>input[type=checkbox]').prop("checked") && idValue != ""){
                                    //$('form>label>input[type=checkbox]').val() ===  'on'
                                    // $('form>label>input[type=checkbox]').prop("checked") == true
                                    // document.querySelector('form>label>input[type=checkbox]').checked == true
                                    // $('form>label>input[type=checkbox]').attr("checked") == 'checked'
                                    // document.querySelector('form>label>input[type=checkbox]:checked') ?
                                    // $('form>label>input[type=checkbox]').is(':checked') == true
                                    localStorage.setItem("loginId", idValue);
                                }else{
                                    localStorage.removeItem("loginId");
                                }
                            }else{
                                alert("지원하지 않는 브라우저 입니다.");
                            }
                            
                            
                            $.ajax({
                                url: '../login.jsp'
                                ,method: 'POST'
                                ,data: {id:idValue, pwd:pwdValue}
                                ,success:function(data){
                                    var responseObj = JSON.parse(data); //{"status": "success"}또는 {"status":"fail"}
                                    if(responseObj.status == "success"){
                                        alert('로그인 성공');	
                                    }else{
                                        $('form>label>input[name=id]').focus();
                                        $('form>label>input[name=id]').select();
                                    }
                                }
                            });
                            return false;
                        });
                
                $("div.divContent>section").on("submit"
                        ,"form"
                        ,function(){
                            return false;
                        });
                //----------로그인버튼 CLICK END ------
                
                //----------로그인 메뉴 START-------------
                //dom트리에서 nav>ul>li>a요소의 class속성이 login인 객체 찾기
                var $loginMenu = $('nav>ul>li>a.login');
                $loginMenu.click(function(){
                $.ajax({
                    url: '../login.html'
                    , success: function(data){
                        $section.html(data);
                        var idValue = $('form>label>input[name=id]').val() = localStorage.getItem("loginId");
                        var pwdValue = $('form>label>input[name=pwd]').val() = localStorage.getItem("loginPwd");
                    }//end success function(data)
                });	
                //$section.html("");
                $section.empty();
                return false;
                });
                //----------로그인 메뉴 END-----------
                
                
                
            });
        </script>
	</head>
	<body>
        <div class="divContent">
            <h1>여니</h1>
            <nav class="nav nav-pills">
                    <ul>
                        <li><a href="#" class="login">로그인</a></li>
                        <li><a href="#" class="productList">상품목록</a></li>
                        <li>
                            <a>학번 찾기</a>
                        </li>
                        <li>
                            <a>비밀번호 찾기</a>
                        </li>
                    </ul>
                    <ul style="display: none;">
                        <li>UserName</li>
                        <li>내정보 보기</li> 
                        <li>로그아웃</li>
                    </ul>
            </nav>
            <section>
                <div class="loginPopUp" style="display:none">

                </div>
                <p>우물 속에는 달이 밝고 구름이 흐르고 하늘이 펼치고 파아란 바람이 불고 가을이 있고 추억처럼 사나이가 있습니다.</p>
                <div id="div1">
                    <h3>텍스트 관련 태그들</h3>
                    <p>
                        단락 1.
                    </p>
                    <p>
                        단락 2.
                        대웅제약은 <mark>중간엽줄기세포</mark>를 이용해 자체 개발한 신종 코로나바이러스 감염증(코로나19) 호흡기 증상 치료제 후보물질(DWP710)에 대해 인도네시아 정부로부터 임상 1상 시험 계획을 승인받았다고 6일 밝혔다.<br>
                        
                        대웅제약은 합자 법인 대웅인피온과 함께 인도네시아에서 임상시험에 나선다.<br>
                        
                        대웅인피온은 인도네시아 보건복지부와 함께 DWP710을 임상중이다.<br>
                    </p>
                </div>
                <div id="div2">
                    <h3>목록을 만드는 태그</h3>
                    <ul>
                        <li>자바</li>
                        <li>오라클</li>
                        <li>HTML</li>
                    </ul>
                    <ol>
                        <li>자바</li>
                        <li>오라클</li>
                        <li>HTML</li>
                    </ol>
                    <dl>
                        <dt>제목</dt>
                        <dd>내용</dd>
                    </dl>
                    <h3>표를 만드는 태그</h3>
                    <table style="width: 50%;border: 1px solid;">
                        <!-- 
                        <thead><tr><td>A</td><td>B</td></tr></thead>
                        <tbody><tr><td>C</td><td>D</td></tr></tbody>
                        <tbody><tr><td>E</td><td>F</td></tr></tbody> 
                        요즘은 tr, td로만 사용한다.
                        -->
                        <!-- <tr><td>A</td><td>B</td></tr> 
                        자동으로 thead, tbody 태그가 붙여진다
                        <tr><td>A</td><td>B</td></tr>
                        <tr><td>A</td><td>B</td></tr> -->
                        <tr><th>A</th><th>B</th></tr>
                        <tr><td>가나다</td><td>라마바</td></tr>
                        <tr><td>노잼노잼</td><td>노잼</td></tr>
                        <tr><td colspan="2">셀병합</td></tr>
                    </table>
                </div>
                <div id="div3">
                    <h3>이미지</h3>
                    <img src="./images/movie_image.jpg" alt="살아있다.">
                    <figure>
                        <img src="./images/movie_image.jpg" alt="살아있다.">
                        <figcaption>살아있다.</figcaption>
                    </figure>
                </div>
                <div id="div4">
                    <h3>링크 만들기</h3>
                    <a href="http://www.naver.com">네이버</a>
                    <a href="http://www.daum.net" target="_blank">다음</a>
                    <br>
                    <a href="#div1">텍스트</a>
                    <a href="#div2">목록</a>
                    <iframe src="../sub.html" width="500px"></iframe>
                </div>
            </section>
        </div>
	</body>
</html>